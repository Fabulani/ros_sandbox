version: "2.4"  # 3.8 didn't support runtime argument
#version: "3.8"

services:
  lecture_demo:
    container_name: lecture_demo
    image: lecture_demo
    # network_mode: host  # "host" dangerous. ok for dev work if carefully using network
    privileged: true  # Security risk. For development and prototyping helps. Should not exist in prod version
    stdin_open: true
    tty: true
    runtime: nvidia

    environment:
      ROS_DOMAIN_ID: "1"
      QT_X!!_NO_MITSHM: "1"
      DISPLAY: $DISPLAY
    volumes:
      - ${LECTURE_DEMO_PATH}/logs/lecture_demo/:/root/.ros/:rw
      - ${LECTURE_DEMO_PATH}/src:/workspace/src
      - /tmp/.X11-unix:/tmp/.X11-unix
    # command: ros2 run lecture_demo demo_publisher.py
    command: bash
